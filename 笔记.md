# 用户中心
## 初始化Springboot
1.github现成模版
2.spring官网 https://start.spring.io/
3.Idea创建

## 需求分析

1. **登录/注册**
2. **用户管理（仅管理员可见）对用户查询或修改**
3. 用户校验

## 技术选型

前端：三件套+React+组件库Ant Design+Umi + Ant Design Pro5

后端：java+spring+springmvc+mybatis+mybatisplus+springboot+mysql

部署：服务器/容器

## 数据库设计

### 用户表

id(主键) 用户ID

userName 用户昵称 

userAccount 用户名

avatarUrl 用户头像链接

gender 用户性别

userPassword 密码

phone 电话

email 邮箱

userStatus 用户状态

----

createTime 创建时间

updateTime 更新时间

isDelete 是否删除（逻辑删除）

## 详细设计

### 注册

#### 逻辑

1. 用户在前端输入账户名密码以及验证码
2. 验证账户、密码、校验密码是否符合要求
   1. 账户名不小于4位
   2. 密码不小于8位
   3. 账户不能重复
   4. 账户不包含特殊字符
   5. 密码校验密码相同
3. 对密码加密（密码千万不可以直接存储到数据库中）
4. 向数据库插入用户数据

#### 前端

1.代理

2.在前端校验密码和校验密码 

3.获取用户当前登录状态

#### 优化

1. 密码重复提示
2. 注册友好提示
3. 注销功能

### 登录

#### 逻辑

1. 校验用户账户密码是否合法
   1. 账户名不小于4位
   2. 密码不小于8位
   3. 账户不能重复
   4. 账户不包含特殊字符

2. 校验密码是否输入正确，要和数据库中的密码对比
3. 用户信息脱敏
4. 记录用户登录态（session）将其存储到服务器上
5. 返回用户信息（注意脱敏）

### 查询操作

逻辑

1. 判断是不是管理员（session信息）
2. 查询数据库
3. 信息脱敏

### 删除操作

1. 判断是不是管理员（session信息）

### 获取用户当前登录信息

#### 后端

##### 逻辑

1. 首先从缓存（session）中获取当前登录信息
2. 如果是频繁更新的则需要通过从缓存拿到的信息再查一遍数据库
3. 对用户信息进行脱敏（getSafetyUser）



